import{r as f,L as z,e as c,f as p,i as t,g as S,h as m,B,M as H,H as l,F as P,t as M,N as C,_ as j,O as U,E as J}from"./CnND5JuG.js";import{A as _}from"./CbknSJ5d.js";const w=f(!1),x=f(null),E=f(!1),N=f(!1),I=f(!1),v=f(null),i=f(null),h="http://localhost:8000/auth";if(typeof window<"u"){const n=localStorage.getItem("access_token");n&&(v.value=n,w.value=!0)}async function T(n,r){i.value=null;try{const s=await fetch(`${h}/login`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:n,password:r})});if(!s.ok){const g=await s.json().catch(()=>({}));throw new Error(g.detail||"Login failed")}const a=await s.json();v.value=a.access_token,localStorage.setItem("access_token",a.access_token),w.value=!0,x.value={email:n},E.value=!1}catch(s){s instanceof Error?i.value=s.message||"Reset failed":i.value="An unknown error occurred",w.value=!1,x.value=null,v.value=null,localStorage.removeItem("access_token"),i.value=s instanceof Error?s.message||"Login failed":"An unknown error occurred"}}async function D(n,r){i.value=null;try{const s=await fetch(`${h}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:r})});if(!s.ok){const a=await s.json().catch(()=>({}));throw new Error(a.detail||"Registration failed")}await T(n,r),N.value=!1}catch(s){s instanceof Error?i.value=s.message||"Registration failed":i.value="An unknown error occurred"}}async function Q(){i.value=null;try{await fetch(`${h}/logout`,{method:"POST"})}catch{}w.value=!1,x.value=null,v.value=null,localStorage.removeItem("access_token")}async function G(n,r="newpassword"){i.value=null;try{const s=await fetch(`${h}/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:r})});if(!s.ok){const a=await s.json().catch(()=>({}));throw new Error(a.detail||"Reset failed")}I.value=!1}catch(s){s instanceof Error?i.value=s.message||"Reset failed":i.value="An unknown error occurred"}}function K(){return{isAuthenticated:w,user:x,showLogin:E,showRegister:N,showReset:I,login:T,register:D,logout:Q,resetPassword:G,token:v,errorMessage:i}}const W={class:"flex bg-black text-white align-middle p-4 items-center justify-between"},X={class:"flex items-center"},Y={class:"me-2"},Z={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ee={class:"bg-white text-black p-6 rounded shadow w-80"},te={class:"flex justify-between"},se={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},oe={class:"bg-white text-black p-6 rounded shadow w-80"},ne={class:"flex justify-between"},ae={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},le={class:"bg-white text-black p-6 rounded shadow w-80"},re={class:"flex justify-between"},ie=z({__name:"AppHeader",setup(n){const{isAuthenticated:r,user:s,showLogin:a,showRegister:g,showReset:b,login:O,register:q,logout:A,resetPassword:F,errorMessage:y}=K();function k(){y.value=null}return(ge,e)=>{var R;const V=H;return p(),c("div",W,[t("div",X,[m(V,{name:"material-symbols-wind-power",size:"32",class:"text-green-400 me-2"}),e[11]||(e[11]=B(" AI Performance Hub "))]),t("div",null,[l(r)?(p(),c(P,{key:1},[t("span",Y,M((R=l(s))==null?void 0:R.email),1),t("button",{class:"text-white bg-gray-600 px-3 py-1 rounded me-2",onClick:e[2]||(e[2]=o=>b.value=!0)}," Reset Password "),t("button",{class:"text-white bg-red-600 px-3 py-1 rounded",onClick:e[3]||(e[3]=(...o)=>l(A)&&l(A)(...o))}," Logout ")],64)):(p(),c(P,{key:0},[t("button",{class:"text-white bg-green-600 px-3 py-1 rounded me-2",onClick:e[0]||(e[0]=o=>a.value=!0)}," Login "),t("button",{class:"text-white bg-blue-600 px-3 py-1 rounded",onClick:e[1]||(e[1]=o=>g.value=!0)}," Register ")],64))]),l(a)?(p(),c("div",Z,[t("div",ee,[e[15]||(e[15]=t("h2",{class:"text-lg font-bold mb-2"},"Login",-1)),m(_,{message:l(y),onClose:k},null,8,["message"]),t("form",{onSubmit:e[5]||(e[5]=C(o=>{var u,d;return l(O)((u=o.target)==null?void 0:u.email.value,(d=o.target)==null?void 0:d.password.value)},["prevent"]))},[e[13]||(e[13]=t("input",{name:"email",type:"email",placeholder:"Email",class:"border p-2 w-full mb-2",required:"",autocomplete:"email"},null,-1)),e[14]||(e[14]=t("input",{name:"password",type:"password",placeholder:"Password",class:"border p-2 w-full mb-2",required:"",autocomplete:"current-password"},null,-1)),t("div",te,[e[12]||(e[12]=t("button",{type:"submit",class:"bg-green-600 text-white px-3 py-1 rounded"}," Login ",-1)),t("button",{type:"button",class:"text-gray-600",onClick:e[4]||(e[4]=o=>a.value=!1)}," Cancel ")])],32),t("button",{class:"text-blue-600 mt-2 underline",onClick:e[6]||(e[6]=o=>{a.value=!1,b.value=!0})}," Forgot password? ")])])):S("",!0),l(g)?(p(),c("div",se,[t("div",oe,[e[19]||(e[19]=t("h2",{class:"text-lg font-bold mb-2"},"Register",-1)),m(_,{message:l(y),onClose:k},null,8,["message"]),t("form",{onSubmit:e[8]||(e[8]=C(o=>{var u,d,$,L;return l(q)((d=(u=o.target)==null?void 0:u.email)==null?void 0:d.value,(L=($=o.target)==null?void 0:$.password)==null?void 0:L.value)},["prevent"]))},[e[17]||(e[17]=t("input",{name:"email",type:"email",placeholder:"Email",class:"border p-2 w-full mb-2",required:"",autocomplete:"email"},null,-1)),e[18]||(e[18]=t("input",{name:"password",type:"password",placeholder:"Password",class:"border p-2 w-full mb-2",required:"",autocomplete:"new-password"},null,-1)),t("div",ne,[e[16]||(e[16]=t("button",{type:"submit",class:"bg-blue-600 text-white px-3 py-1 rounded"}," Register ",-1)),t("button",{type:"button",class:"text-gray-600",onClick:e[7]||(e[7]=o=>g.value=!1)}," Cancel ")])],32)])])):S("",!0),l(b)?(p(),c("div",ae,[t("div",le,[e[22]||(e[22]=t("h2",{class:"text-lg font-bold mb-2"},"Reset Password",-1)),m(_,{message:l(y),onClose:k},null,8,["message"]),t("form",{onSubmit:e[10]||(e[10]=C(o=>{var u,d;return l(F)(((d=(u=o.target)==null?void 0:u.email)==null?void 0:d.value)||"")},["prevent"]))},[e[21]||(e[21]=t("input",{name:"email",type:"email",placeholder:"Email",class:"border p-2 w-full mb-2",required:"",autocomplete:"email"},null,-1)),t("div",re,[e[20]||(e[20]=t("button",{type:"submit",class:"bg-gray-600 text-white px-3 py-1 rounded"}," Send Reset Link ",-1)),t("button",{type:"button",class:"text-gray-600",onClick:e[9]||(e[9]=o=>b.value=!1)}," Cancel ")])],32)])])):S("",!0)])}}}),ue={},de={class:"flex bg-black text-white text-xs p-4"};function ce(n,r){return p(),c("div",de,r[0]||(r[0]=[U('<div class="grid grid-cols-8 gap-4"><div class="font-bold">Links:</div><div><a href="https://nuxt.com/">Nuxt</a></div><div><a href="https://ui.nuxt.com/">NuxtUI</a></div><div><a href="https://nuxt.studio/">Nuxt Studio</a></div><div><a href="https://tailwindcss.com/">TailwindCSS</a></div><div><a href="https://iconify.design/">Iconify</a></div><div><a href="https://fastapi.tiangolo.com/">FastAPI</a></div><div><a href="https://www.sqlalchemy.org/">SQLAlchemy</a></div></div>',1)]))}const pe=j(ue,[["render",ce]]),fe={};function me(n,r){const s=ie,a=pe;return p(),c("div",null,[m(s),J(n.$slots,"default"),m(a)])}const be=j(fe,[["render",me]]);export{be as default};
